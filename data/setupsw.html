<!doctype html>
<html lang="it">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="src/bootstrap.min.css" rel="stylesheet">

    <title>TeslaDome</title>
	
	<style>
	body {
		background-color: #353535;
	}
	p,h1,h2,h3,h4,h5,h6 {
		color: #F9F8F8;
	}
	
</style>

  </head>
  <body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">StefanoTesla</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
		<a class="nav-link" href="indexdm.html">Dome</a>
        <a class="nav-link" aria-current="page" href="indexsw.html">Home</a>
        <a class="nav-link active" href="#">Impostazioni</a>
      </div>
    </div>
  </div>
</nav>

<div class="container">

<div class="row">
 
      <h1 class="text-center">Impostazioni</h1>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 1:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname0" value="aa">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc0" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 2:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname1" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc1" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 3:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname2" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc2" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 4:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname3" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc3" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 5:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname4" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc4" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="row mt-5">
	<div class="col-md-2">
	<p>Switch 6:</p>
	</div>
	<div class="col">
	<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Nome:</span>
		<input type="text" class="form-control" id="swtchname5" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
		<div class="input-group input-group-lg col-4">
		<span class="input-group-text" id="inputGroup-sizing-lg">Descrizione:</span>
		<input type="text" class="form-control" id="swtchdesc5" value="" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	</div>
    </div>
</div>
<div class="d-grid gap-4 col-4 mx-auto mt-5">
  <button class="btn btn-success" type="button" onclick="SaveData()">Salva</button>
</div>

<script src="src/bootstrap.bundle.min.js"></script>

<script>
	window.onload = function() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
			var count = 0;
			var txt = this.responseText;
			var namePrefix = "swtchname";
			var descPrefix = "swtchdesc";
			var obj = JSON.parse(txt);
			for(key in obj.Switch) {

				if(obj.Switch.hasOwnProperty(key)) {

				document.getElementById(namePrefix + count).value = obj.Switch[count].name;
				document.getElementById(descPrefix + count).value = obj.Switch[count].description;
				
				count++;
				}
			}
		};
	}
	xhttp.open("GET", "/getswitchname", true);
	xhttp.send();
	};
	
function SaveData() {
	var xhttp = new XMLHttpRequest();
	var SWarr = [];
	var i;
	var namePrefix = "swtchname";
	var descPrefix = "swtchdesc";
	var count = document.querySelectorAll('[id^="swtchname"]').length;

	for (var i = 0; i < count; i++) {
		SWarr.push({
			name: document.getElementById(namePrefix + i).value,
			description: document.getElementById(descPrefix + i).value,
		});
	}

	var jsonFormInfo = (JSON.stringify({ Switch: [SWarr] }));

	xhttp.open("POST", "/storeswdata");
	xhttp.setRequestHeader('Content-type', 'application/json');
	xhttp.send(jsonFormInfo);
}
</script>
</div>
  </body>
</html>